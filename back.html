<div id="cloze-is-back" hidden="">{{cloze:Text}}</div>
{{FrontSide}}

<br /><br />

<div class="note-box" hidden="">{{Back Extra}}</div>

<script>
  (function applyNotes() {
    const activeCloze = document.querySelector(".cloze");
    const cardOrd = activeCloze.getAttribute("data-ordinal");

    const noteBox = document.querySelector(".note-box");

    const noteContent = noteBox.innerHTML.trim();
    if (noteContent.length == 0) return;

    const notes = noteContent.split("|||");

    for (let i = 0; i < notes.length; i++) {
      note = notes[i];
      if (
        (note.trim() && note.trim()[0] !== "C") ||
        note.match(`^C${cardOrd}::`)
      ) {
        const noteText = note.replace(`C${cardOrd}::`, "");
        noteBox.innerHTML =
          "<span class='note-header'>NOTE</span><p>" + noteContent + "</p>";
        noteBox.hidden = false;
        return;
      }
    }
  })();
</script>
